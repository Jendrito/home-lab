1. Creamos un contenedor Docker con Ubuntu con el siguiente comando:

sudo docker run -it --name wazuh-ubuntu ubuntu:22.04 /bin/bash

- docker run: lanza un nuevo contenedor.
- -it: modo interactivo, con terminal.
- --name wazuh-ubuntu: nombre que le damos al contenedor.
- ubuntu:22.04: imagen base de Ubuntu 22.04.

/bin/bash: arranca con una terminal bash.

2. Vamos a notar que ahora la consola de Kali nos va a dejar dentro del sistema Ubuntu, como si estuvieramos dentro de un cli de ese sistema operativo. La forma más sencilla de ver esto es porque ahora el usuario será "root" y seguido de un numero (foto 1). Ahora, corremos los siguientes comandos:

apt update && apt upgrade -y
apt install curl wget gnupg apt-transport-https lsb-release -y

Con el primero actualizamos todos los paquetes y con el segundo instalamos herramientas para agregar repositorios y descargar software, como luego haremos con Wazuh.

3. Agregamos el repositorio de Wazuh con:

curl -s https://packages.wazuh.com/key/GPG-KEY-WAZUH | gpg --dearmor > /usr/share/keyrings/wazuh.gpg
echo "deb [signed-by=/usr/share/keyrings/wazuh.gpg] https://packages.wazuh.com/4.x/apt/ stable main" > /etc/apt/sources.list.d/wazuh.list

- curl: descarga el archivo desde la URL.
- -s: (silent): no muestra la barra de progreso ni los mensajes de error.
- gpg: herramienta para gestionar claves GPG.
- --dearmor > /usr/share/keyrings/wazuh.gpg: especifica la ruta donde se guardará la clave
- echo: imprime la cadena de texto especificada
- deb [signed-by=/usr/share/keyrings/wazuh.gpg]: los paquetes de este repositorio deben estar firmados con la clave GPG que importamos antes
- https://packages.wazuh.com/4.x/apt/ stable main": la URL base del repositorio de Wazuh para la versión 4.x, con su version estable
- > /etc/apt/sources.list.d/wazuh.list: archivo donde se guardará la configuración del repositorio

4. Actualizamos nuevamente Ubuntu:

apt update

Y luego instalamos Wazuh Manager:

apt install wazuh-manager -y

5. Para saber dónde se instaló Wazuh Manager:

ls /var/ossec/bin

Allí podemos ver el directorio "wazuh-control", que es donde se encuentra el archivo para ejecutar el arranque:

/var/ossec/bin/wazuh-control start




